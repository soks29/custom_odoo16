<odoo>
  <data>
      <record id="kzm_instance_view_search" model="ir.ui.view">
          <field name="name">Search by Designation , address , state </field>
          <field name="model">kzm.instance.request</field>
          <field name="arch" type="xml">
              <search>
                  <field name="name" />

                  <field name="adress_ip" />

                  <field name="state" />
              </search>
          </field>
      </record>
      <!-- explicit action server -->
      <record id="action_valide" model="ir.actions.server">
          <field name="name">Valider</field>
          <field name="type">ir.actions.server</field>
          <field name="model_id" ref="model_kzm_instance_request"/>
          <field name="binding_model_id" ref="model_kzm_instance_request" />
          <field name="state">code</field>
          <field name="code">records.action_confirm()</field>
      </record>

      <!-- explicit action server -->

      <record id="submitted_cron" model="ir.cron">
            <field name="name">Planifier</field>
            <field name="model_id" ref="model_kzm_instance_request"/>
            <field name="interval_number">1</field>
            <field name="interval_type">minutes</field>
            <field name="type">ir.actions.server</field>
            <field name="numbercall">-1</field>
            <field name="code">model.action_scheduled()</field>
            <field name="state">code</field>
            <field name="active" eval="True"></field>
        </record>
    <!-- explicit list view definition -->

    <record model="ir.ui.view" id="kzm_instance_request_list_view">
      <field name="name">kzm_instance_request list</field>
      <field name="model">kzm.instance.request</field>
      <field name="arch" type="xml">
        <tree>
            <field name = "create_uid"/>
            <field name = "name"/>
            <field name = "active"/>
            <field name = "treat_date"/>
            <field name = "cpu"/>
            <field name = "ram"/>
            <field name = "disk"/>
            <field name = "state"
                 decoration-success="state == 'traite' or state == 'entraitement'"
                 decoration-info="state == 'brouillon' or state == 'entraitement'" widget="badge"
                 optional="show" on_change="1" modifiers="{&quot;readonly&quot;: true}"/>
        </tree>
      </field>
    </record>

    <!-- explicit form view definition -->
    <record model="ir.ui.view" id="kzm_instance_request_form_view">
      <field name="name">kzm_instance_request list</field>
      <field name="model">kzm.instance.request</field>
      <field name="arch" type="xml">
        <form>
          <header>
              <button name="action_draft" string="Draft copy"  type="object" attrs="{'invisible':['|',('state','=','brouillon'),('state','=','entraitement')]}" class="oe_highlight" />
              <button name="action_submissive" string="Submissing"  type="object" attrs="{'invisible':[('state','!=','brouillon')]}" class="oe_highlight"   />
              <button name="action_processing" string="Processing" type="object" attrs="{'invisible':[('state','!=','soumise')]}" class="oe_highlight"  />
              <button name="action_treated" string="Treated" type="object" attrs="{'invisible':[('state','!=','entraitement')]}" class="oe_highlight" />
              <field name="state" widget="statusbar"/>
          </header>

          <sheet>
            <group colspan="2" col="2">
              <group colspan="1" col="1">
                <field name="name" required="True" attrs="{'readonly':[('state', '=', 'traite')]}"/>
                <field name="adress_ip" attrs="{'invisible':[('state','!=','traite')], 'readonly':[('state', '=', 'traite')]}" />
                  <field name="active" attrs="{'readonly':[('state', '=', 'traite')]}" default="True" />
              </group>
              <group colspan="1" col="2">
                  <field name="cpu" attrs="{'readonly':[('state', '=', 'traite')]}"/>
                  <field name="ram" attrs="{'readonly':[('state', '=', 'traite')]}" />
                <field name="disk" attrs="{'readonly':[('state', '=', 'traite')]}"/>
              </group>
              <group colspan="1" col="2">
                  <field name="url" attrs="{'readonly':[('state', '=', 'traite')]}"/>
                  <field name = "state" attrs="{'readonly':[('state', '=', 'traite')]}"/>
              </group>
              <group colspan="1" col="2">
                  <field name ="treat_date" attrs="{'readonly':[('state', '=', 'traite')]}"/>
                  <field name ="limit_date" required="true" attrs="{'readonly':[('state', '=', 'traite')]}"/>
                  <field name ="treat_duration" attrs="{'readonly':[('state', '=', 'traite')]}"/>
              </group>
            </group>
          </sheet>
            <div class="oe_chatter">
                <field name="message_follower_ids" widget="mail_followers"></field>
                <field name="message_ids" widget="mail_thread"></field>
            </div>
        </form>
      </field>
    </record>

    <!-- actions opening views on models -->

<!--    <record model="ir.actions.act_windows" id="kzm_instance_request_action_window">-->
<!--      <field name="name">kzm_instance_request window</field>-->
<!--      <field name="res_model">instance.request</field>-->
<!--      <field name="view_model">tree, form</field>-->
<!--     </record>-->


      <record id="kzm_instance_request_window" model="ir.actions.act_window">
          <field name="name">Demande d’instance</field>
          <field name="res_model">kzm.instance.request</field>
          <field name="view_mode">tree,form</field>
          <field name="domain">['|',('state','=','soumise'),('state','=','entraitement')]</field>
          <field name="help" type="html">
               <p class="o_view_nocontent_smiling_face">
                 Create your first instance
               </p>
          </field>

      </record>



      <record id="kzm_instance_request_action_window" model="ir.actions.act_window">
          <field name="name">Demande d’instance</field>
          <field name="type">ir.actions.act_window</field>
          <field name="res_model">kzm.instance.request</field>
          <field name="view_mode">tree,form</field>
          <field name="help" type="html">
               <p class="o_view_nocontent_smiling_face">
                 Create your first instance
               </p>
          </field>
      </record>

<!--    &lt;!&ndash; Top menu item &ndash;&gt;-->

<!--    <menuitem name="kzm_instance_request" id="menu_root"/>-->

<!--    &lt;!&ndash; menu categories &ndash;&gt;-->

<!--    <menuitem name="Menu 1" id="kzm_instance_request_menu_1" parent="menu_root"/>-->
<!--    &lt;!&ndash;-->
<!--    <menuitem name="Menu 2" id="kzm_instance_request.menu_2" parent="kzm_instance_request.menu_root"/>-->

<!--    &ndash;&gt;-->
<!--    &lt;!&ndash; actions &ndash;&gt;-->

<!--    <menuitem name="List" id="kzm_instance_request_list" parent="kzm_instance_request_menu_1"-->
<!--              action="kzm_instance_request_action_window"/>-->
<!--    &lt;!&ndash;-->
<!--    <menuitem name="Server to list" id="kzm_instance_request" parent="kzm_instance_request.menu_2"-->
<!--              action="kzm_instance_request.action_server"/>-->

    <menuitem id="test_menu_root" name="Instance" web_icon="kzm_instance_request, static/description/odoo_logo.png">
      <menuitem id="session_model_menu_action" action="kzm_instance_request_action_window" name="Mes demandes"/>
    </menuitem>

    <menuitem id="model1_menu1_action" action="kzm_instance_request.kzm_odoo_instance_window" parent="test_menu_root" name="Odoo Version"/>

    <menuitem id="model1_menu2_action"  parent="test_menu_root" name="Responsables">
        <menuitem id="model_odo" action="kzm_instance_request.kzm_instance_request_window" name="À valider" sequence="10" groups="kzm_instance_request.group_kzm_instance_request_responsible"/>
        <menuitem id = "model2_odoo" action="kzm_instance_request.kzm_instance_request_action_window" name="Toutes"/>
    </menuitem>

    <menuitem id="model1_menu3_action" action="kzm_instance_request.kzm_odoo_instance_window" parent="test_menu_root" name="Analyse"/>
    <menuitem id="model1_menu4_action" action="kzm_instance_request.kzm_odoo_instance_window" parent="test_menu_root" name="Configuration"/>

  </data>
</odoo>